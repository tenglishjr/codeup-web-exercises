<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport"
              content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Weather Application</title>

        <!--******* STYLE *******-->
        <!--Bootstrap-->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">

        <!--Custom CSS-->
        <style>

            label {
                color: #fff;
            }

            .day-night-temp {
                font-size: 24px;
            }

            #city-name {
                color: #5913c2;
                font-size: 26px;
                font-weight: bold;
            }

        </style>
    </head>


    <body>
        <main class="container-fluid px-0">

            <!--NAVBAR-->
            <nav class="navbar navbar-expand-md navbar-dark bg-dark">
                <a class="navbar-brand" href="#">Weather Forecast API</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <form class="form-inline my-2 my-lg-0 ml-auto">
                        <label for="city-search" class="pr-2">Search for a city!</label>
                        <input class="form-control mr-sm-2" id="city-search" type="search" placeholder="Enter city name" aria-label="Search">
                        <button class="btn btn-outline-success my-2 my-sm-0" id="search-btn" type="submit">Search</button>
                    </form>
                </div>
            </nav>


            <div class="row">
                <div class="col-12 h2 mt-3 text-center">3-Day Forecast</div>
            </div>


            <!--FORECAST-->
            <div class="card mt-5">
                <div class="text-center card-header" id="city-name"></div>
                <div class="card-body row bg-dark" id="three-forecast"></div>
            </div>


        </main>

        <script src="js/jquery-2.2.4.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
        <script>
            $(document).ready(function () {



                $.get('http://api.openweathermap.org/data/2.5/forecast', {
                    APPID: '2f220ccab431c5fc5c2eb065de2d4bb8',
                    id: 4726206,
                    units: 'imperial'
                }).done(function (data) {
                    generateForecast(data);
                    console.log(data);
                });

                function generateForecast(obj) {

                    var output = '';

                    $('#city-name').append(obj.city.name);

                    for (var i = 0; i < 17; i += 8) {
                        // Generates Card to hold weather info
                        output += '<div class="col-12 col-sm-4 card px-2">';
                        output += '<div class="card-body row text-center">';

                        // Labels the relevant day of weather data
                        if (i === 0) {
                            output += '<div class="col-12 h3">Today</div>';
                        } else if (i === 8) {
                            output += '<div class="col-12 h3">Tomorrow</div>';
                        } else {
                            output += '<div class="col-12 h3">Later this Week</div>';
                        }

                        // Displays Day/Night Temps
                        output += '<div class="col-12 day-night-temp">' + (obj.list[i].main.temp_max).toFixed(0) + 'ºF / ';
                        output += (obj.list[i + 4].main.temp_min).toFixed(0) + 'ºF</div>';

                        // Shows Relevant Weather Image
                        output += '<div class="col-12 my-2"><img src="http://openweathermap.org/img/w/' + obj.list[i].weather[0].icon + '.png"></div>';

                        // Displays Clouds Status
                        output += '<div class="col-12 my-2"><strong>Clouds: </strong>' + obj.list[i].weather[0].description + '</div>';

                        // Displays Humidity
                        output += '<div class="col-12 my-2"><strong>Humidity: </strong>' + (obj.list[i].main.humidity) + '%</div>';

                        // Displays Wind Speed (mph)
                        output += '<div class="col-12 my-2"><strong>Wind Speed: </strong>' + (obj.list[i].wind.speed).toFixed(0) + ' mph</div>';

                        // Displays Pressure
                        output += '<div class="col-12 my-2"><strong>Pressure: </strong>' + (obj.list[i].main.pressure) + ' Pa</div>';

                        output += '</div></div>'
                    }

                    $('#three-forecast').append(output);
                }
            });
        </script>
    </body>
</html>